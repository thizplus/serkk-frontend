# ğŸ“Š SUEKK - Code Structure Analysis & Refactoring Plan

**à¸§à¸±à¸™à¸—à¸µà¹ˆ:** 8 à¸à¸¤à¸¨à¸ˆà¸´à¸à¸²à¸¢à¸™ 2025
**à¸ˆà¸¸à¸”à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œ:** à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸„à¹‰à¸”à¹à¸¥à¸°à¸§à¸²à¸‡à¹à¸œà¸™ Refactoring
**à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢:** à¹à¸¢à¸à¸ªà¹ˆà¸§à¸™à¸à¸±à¸™à¸Šà¸±à¸”à¹€à¸ˆà¸™ à¸ˆà¸±à¸”à¸à¸²à¸£à¸‡à¹ˆà¸²à¸¢ à¸‚à¸¢à¸²à¸¢à¸‡à¸²à¸™à¸ªà¸°à¸”à¸§à¸

---

## ğŸ¯ à¸›à¸±à¸à¸«à¸²à¸«à¸¥à¸±à¸à¸—à¸µà¹ˆà¸à¸š

### 1. ğŸ”´ à¹„à¸Ÿà¸¥à¹Œà¹ƒà¸«à¸à¹ˆà¹€à¸à¸´à¸™à¹„à¸› (3 à¹„à¸Ÿà¸¥à¹Œà¸§à¸´à¸à¸¤à¸•)

```
chatStore.ts         - 995 à¸šà¸£à¸£à¸—à¸±à¸”  âŒ à¸¢à¸¸à¹ˆà¸‡à¹€à¸«à¸¢à¸´à¸‡
sidebar.tsx          - 726 à¸šà¸£à¸£à¸—à¸±à¸”  âŒ à¸‹à¸±à¸šà¸‹à¹‰à¸­à¸™
chatWebSocket.ts     - 559 à¸šà¸£à¸£à¸—à¸±à¸”  âŒ à¸›à¸§à¸”à¸«à¸±à¸§
```

### 2. âš ï¸ Hardcoded Values à¸à¸£à¸°à¸ˆà¸±à¸”à¸à¸£à¸°à¸ˆà¸²à¸¢

```typescript
// à¸à¸šà¹ƒà¸™ 21 à¹„à¸Ÿà¸¥à¹Œ!
toast.error('à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸à¸²à¸£à¹à¸Šà¸—à¹„à¸”à¹‰');
toast.success('à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸à¸ªà¸•à¹Œà¸ªà¸³à¹€à¸£à¹‡à¸ˆ!');

// à¸à¸šà¹ƒà¸™ 52 à¹„à¸Ÿà¸¥à¹Œ!
import { Bell, MessageSquare, ThumbsUp } from "lucide-react";

// Magic numbers à¸—à¸¸à¸à¸—à¸µà¹ˆ
maxLength={300}
rows={8}
limit: 20
```

### 3. ğŸ”„ Code à¸‹à¹‰à¸³à¸‹à¹‰à¸­à¸™

- **Loading States** à¸‹à¹‰à¸³à¸à¸±à¸™ 15+ à¹„à¸Ÿà¸¥à¹Œ
- **Error States** à¸‹à¹‰à¸³à¸à¸±à¸™ 12+ à¹„à¸Ÿà¸¥à¹Œ
- **Empty States** à¸‹à¹‰à¸³à¸à¸±à¸™ 10+ à¹„à¸Ÿà¸¥à¹Œ
- **Avatar Display** à¸‹à¹‰à¸³à¸à¸±à¸™ 20+ à¹„à¸Ÿà¸¥à¹Œ

---

## ğŸ“ 1. à¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡ Refactor à¸”à¹ˆà¸§à¸™

### ğŸ”´ Critical Priority (à¸•à¹‰à¸­à¸‡à¸—à¸³à¸à¹ˆà¸­à¸™)

#### A. `lib/stores/chatStore.ts` - 995 à¸šà¸£à¸£à¸—à¸±à¸”

**à¸›à¸±à¸à¸«à¸²:**
- State, Actions, Business Logic à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¹„à¸Ÿà¸¥à¹Œà¹€à¸”à¸µà¸¢à¸§
- à¸¡à¸µ 25+ methods à¸£à¸§à¸¡à¸à¸±à¸™
- WebSocket logic à¸›à¸™à¸à¸±à¸š API logic
- Type definitions à¸›à¸™à¸à¸±à¸š implementation

**à¹à¸à¹‰à¹„à¸‚:** à¹à¸¢à¸à¹€à¸›à¹‡à¸™ 7 à¹„à¸Ÿà¸¥à¹Œ

```
lib/stores/chat/
â”œâ”€â”€ index.ts                    # Export à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
â”œâ”€â”€ chatStore.ts                # 150 à¸šà¸£à¸£à¸—à¸±à¸” - state à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
â”œâ”€â”€ chatTypes.ts                # 150 à¸šà¸£à¸£à¸—à¸±à¸” - types
â”œâ”€â”€ chatSelectors.ts            # 100 à¸šà¸£à¸£à¸—à¸±à¸” - selectors
â”œâ”€â”€ actions/
â”‚   â”œâ”€â”€ conversationActions.ts  # 200 à¸šà¸£à¸£à¸—à¸±à¸”
â”‚   â”œâ”€â”€ messageActions.ts       # 200 à¸šà¸£à¸£à¸—à¸±à¸”
â”‚   â””â”€â”€ onlineStatusActions.ts  # 100 à¸šà¸£à¸£à¸—à¸±à¸”
â””â”€â”€ helpers/
    â”œâ”€â”€ messageHelpers.ts       # 100 à¸šà¸£à¸£à¸—à¸±à¸”
    â””â”€â”€ conversationHelpers.ts  # 100 à¸šà¸£à¸£à¸—à¸±à¸”
```

**à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:**

```typescript
// âŒ à¸à¹ˆà¸­à¸™: chatStore.ts (995 à¸šà¸£à¸£à¸—à¸±à¸”)
export const useChatStore = create<ChatState>((set, get) => ({
  conversations: [],
  messages: {},
  onlineUsers: new Set(),

  // 25+ methods here...
  fetchConversations: async () => { /* 50 lines */ },
  fetchMessages: async () => { /* 80 lines */ },
  sendMessage: async () => { /* 100 lines */ },
  // ... etc
}));

// âœ… à¸«à¸¥à¸±à¸‡: chatStore.ts (150 à¸šà¸£à¸£à¸—à¸±à¸”)
export const useChatStore = create<ChatState>((set, get) => ({
  // State only
  conversations: [],
  messages: {},
  onlineUsers: new Set(),

  // Actions from other files
  ...createConversationActions(set, get),
  ...createMessageActions(set, get),
  ...createOnlineStatusActions(set, get),
}));

// actions/messageActions.ts (200 à¸šà¸£à¸£à¸—à¸±à¸”)
export const createMessageActions = (set, get) => ({
  fetchMessages: async (conversationId: string) => { /* ... */ },
  sendMessage: async (data: SendMessageData) => { /* ... */ },
  markAsRead: async (conversationId: string) => { /* ... */ },
});
```

---

#### B. `components/ui/sidebar.tsx` - 726 à¸šà¸£à¸£à¸—à¸±à¸”

**à¸›à¸±à¸à¸«à¸²:**
- 25+ components à¹ƒà¸™à¹„à¸Ÿà¸¥à¹Œà¹€à¸”à¸µà¸¢à¸§
- Constants à¸à¸£à¸°à¸ˆà¸±à¸”à¸à¸£à¸°à¸ˆà¸²à¸¢
- Context logic à¸›à¸™à¸à¸±à¸š UI

**à¹à¸à¹‰à¹„à¸‚:** à¹à¸¢à¸à¹€à¸›à¹‡à¸™ 15 à¹„à¸Ÿà¸¥à¹Œ

```
components/ui/sidebar/
â”œâ”€â”€ index.ts                    # Re-export
â”œâ”€â”€ constants.ts                # 40 à¸šà¸£à¸£à¸—à¸±à¸”
â”œâ”€â”€ SidebarContext.tsx          # 150 à¸šà¸£à¸£à¸—à¸±à¸”
â”œâ”€â”€ SidebarProvider.tsx         # 120 à¸šà¸£à¸£à¸—à¸±à¸”
â”œâ”€â”€ Sidebar.tsx                 # 100 à¸šà¸£à¸£à¸—à¸±à¸”
â”œâ”€â”€ SidebarMenu.tsx             # 150 à¸šà¸£à¸£à¸—à¸±à¸”
â””â”€â”€ components/
    â”œâ”€â”€ SidebarHeader.tsx       # 50 à¸šà¸£à¸£à¸—à¸±à¸”
    â”œâ”€â”€ SidebarContent.tsx      # 50 à¸šà¸£à¸£à¸—à¸±à¸”
    â”œâ”€â”€ SidebarFooter.tsx       # 50 à¸šà¸£à¸£à¸—à¸±à¸”
    â”œâ”€â”€ SidebarTrigger.tsx      # 40 à¸šà¸£à¸£à¸—à¸±à¸”
    â”œâ”€â”€ SidebarRail.tsx         # 30 à¸šà¸£à¸£à¸—à¸±à¸”
    â””â”€â”€ ... (à¸­à¸µà¸ 5 components)
```

**Extract Constants:**

```typescript
// constants.ts
export const SIDEBAR_CONFIG = {
  COOKIE_NAME: 'sidebar_state',
  COOKIE_MAX_AGE: 60 * 60 * 24 * 7, // 7 days
  WIDTH: '16rem',
  WIDTH_MOBILE: '18rem',
  WIDTH_ICON: '3rem',
  KEYBOARD_SHORTCUT: 'b',
} as const;
```

---

#### C. `lib/services/websocket/chatWebSocket.ts` - 559 à¸šà¸£à¸£à¸—à¸±à¸”

**à¸›à¸±à¸à¸«à¸²:**
- Connection logic à¸›à¸™à¸à¸±à¸š message routing
- Browser notification logic à¸à¸±à¸‡à¸­à¸¢à¸¹à¹ˆ
- Hardcoded delays à¹à¸¥à¸° intervals

**à¹à¸à¹‰à¹„à¸‚:** à¹à¸¢à¸à¹€à¸›à¹‡à¸™ 5 à¹„à¸Ÿà¸¥à¹Œ

```
lib/services/websocket/
â”œâ”€â”€ chatWebSocket.ts           # 200 à¸šà¸£à¸£à¸—à¸±à¸” - client only
â”œâ”€â”€ messageRouter.ts           # 150 à¸šà¸£à¸£à¸—à¸±à¸” - route messages
â”œâ”€â”€ connectionManager.ts       # 100 à¸šà¸£à¸£à¸—à¸±à¸” - reconnection
â”œâ”€â”€ notificationHandler.ts     # 100 à¸šà¸£à¸£à¸—à¸±à¸” - notifications
â””â”€â”€ config.ts                  # 50 à¸šà¸£à¸£à¸—à¸±à¸” - constants
```

**Extract Config:**

```typescript
// config.ts
export const WEBSOCKET_CONFIG = {
  MAX_RECONNECT_ATTEMPTS: 5,
  RECONNECT_DELAY: {
    INITIAL: 1000,
    MAX: 60000,
    MULTIPLIER: 2,
  },
  PING_INTERVAL: 54000,
  MESSAGE_QUEUE: {
    MAX_SIZE: 100,
    RETRY_TIMEOUT: 5000,
  },
} as const;
```

---

### ğŸŸ¡ High Priority (à¸—à¸³à¸–à¸±à¸”à¹„à¸›)

#### D. Large Pages (400-500 à¸šà¸£à¸£à¸—à¸±à¸”)

| à¹„à¸Ÿà¸¥à¹Œ | à¸šà¸£à¸£à¸—à¸±à¸” | à¸›à¸±à¸à¸«à¸² | à¸§à¸´à¸˜à¸µà¹à¸à¹‰ |
|------|---------|-------|---------|
| `app/profile/edit/page.tsx` | 410 | Form + Upload + Validation | à¹à¸¢à¸à¹€à¸›à¹‡à¸™ Form Component + Hooks |
| `app/profile/[username]/page.tsx` | 395 | Tabs + Data fetching + Actions | à¹à¸¢à¸à¹€à¸›à¹‡à¸™ Components + Hooks |
| `app/notifications/page.tsx` | 395 | List + Filtering + Actions | à¹à¸¢à¸ Icon mapping + Hooks |

**à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡ Refactor:**

```typescript
// âŒ à¸à¹ˆà¸­à¸™: app/profile/edit/page.tsx (410 à¸šà¸£à¸£à¸—à¸±à¸”)
export default function EditProfilePage() {
  const [avatar, setAvatar] = useState<File | null>(null);
  const [cover, setCover] = useState<File | null>(null);
  const [bio, setBio] = useState('');
  // ... 10+ state variables

  const handleAvatarUpload = async (file: File) => { /* 40 lines */ }
  const handleSubmit = async () => { /* 50 lines */ }
  const validateUrl = (url: string) => { /* 10 lines */ }

  return ( /* 300 lines of JSX */ )
}

// âœ… à¸«à¸¥à¸±à¸‡: app/profile/edit/page.tsx (100 à¸šà¸£à¸£à¸—à¸±à¸”)
export default function EditProfilePage() {
  return <EditProfileView />;
}

// EditProfileView.tsx (150 à¸šà¸£à¸£à¸—à¸±à¸”)
export function EditProfileView() {
  const formData = useProfileForm();
  const avatarUpload = useAvatarUpload();

  return ( /* clean JSX */ );
}

// hooks/useProfileForm.ts (100 à¸šà¸£à¸£à¸—à¸±à¸”)
export const useProfileForm = () => {
  // All form logic here
}

// hooks/useAvatarUpload.ts (60 à¸šà¸£à¸£à¸—à¸±à¸”)
export const useAvatarUpload = () => {
  // Upload logic here
}
```

---

#### E. Large Service Files (400+ à¸šà¸£à¸£à¸—à¸±à¸”)

**`lib/hooks/queries/usePosts.ts` - 407 à¸šà¸£à¸£à¸—à¸±à¸”**

à¹à¸¢à¸à¹€à¸›à¹‡à¸™:
```
lib/hooks/queries/posts/
â”œâ”€â”€ index.ts
â”œâ”€â”€ queryKeys.ts              # 50 à¸šà¸£à¸£à¸—à¸±à¸”
â”œâ”€â”€ usePostQueries.ts         # 150 à¸šà¸£à¸£à¸—à¸±à¸” - GET
â”œâ”€â”€ usePostInfiniteQueries.ts # 150 à¸šà¸£à¸£à¸—à¸±à¸” - infinite scroll
â””â”€â”€ usePostMutations.ts       # 200 à¸šà¸£à¸£à¸—à¸±à¸” - CREATE/UPDATE/DELETE
```

**`lib/services/api/chat.service.ts` - 405 à¸šà¸£à¸£à¸—à¸±à¸”**

à¹à¸¢à¸à¹€à¸›à¹‡à¸™:
```
lib/services/api/chat/
â”œâ”€â”€ index.ts
â”œâ”€â”€ conversationService.ts    # 120 à¸šà¸£à¸£à¸—à¸±à¸”
â”œâ”€â”€ messageService.ts         # 120 à¸šà¸£à¸£à¸—à¸±à¸”
â”œâ”€â”€ searchService.ts          # 60 à¸šà¸£à¸£à¸—à¸±à¸”
â””â”€â”€ blockService.ts           # 60 à¸šà¸£à¸£à¸—à¸±à¸”
```

---

## ğŸ¨ 2. Hardcoded Values à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¹à¸à¹‰

### A. Toast Messages (à¸à¸šà¹ƒà¸™ 21 à¹„à¸Ÿà¸¥à¹Œ!)

**à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™:**
```typescript
// à¸à¸£à¸°à¸ˆà¸±à¸”à¸à¸£à¸°à¸ˆà¸²à¸¢à¸—à¸¸à¸à¹„à¸Ÿà¸¥à¹Œ
toast.error('à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸à¸²à¸£à¹à¸Šà¸—à¹„à¸”à¹‰');
toast.success('à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸à¸ªà¸•à¹Œà¸ªà¸³à¹€à¸£à¹‡à¸ˆ!');
toast.error('à¸à¸£à¸¸à¸“à¸²à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¸à¹ˆà¸­à¸™à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹à¸Šà¸—');
```

**à¹à¸à¹‰à¹„à¸‚:** à¸ªà¸£à¹‰à¸²à¸‡ `lib/config/toastMessages.ts`

```typescript
// lib/config/toastMessages.ts
export const TOAST_MESSAGES = {
  // Authentication
  AUTH: {
    LOGIN_SUCCESS: 'à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¸ªà¸³à¹€à¸£à¹‡à¸ˆ!',
    LOGIN_ERROR: 'à¸­à¸µà¹€à¸¡à¸¥à¸«à¸£à¸·à¸­à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡',
    LOGOUT_SUCCESS: 'à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸šà¸ªà¸³à¹€à¸£à¹‡à¸ˆ!',
    REGISTER_SUCCESS: 'à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!',
    REGISTER_ERROR: 'à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸à¹„à¸”à¹‰',
    SESSION_EXPIRED: 'à¹€à¸‹à¸ªà¸Šà¸±à¸™à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸ à¸à¸£à¸¸à¸“à¸²à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¹ƒà¸«à¸¡à¹ˆ',
  },

  // Posts
  POST: {
    CREATE_SUCCESS: 'à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸à¸ªà¸•à¹Œà¸ªà¸³à¹€à¸£à¹‡à¸ˆ!',
    CREATE_ERROR: 'à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸à¸ªà¸•à¹Œà¹„à¸”à¹‰',
    UPDATE_SUCCESS: 'à¸­à¸±à¸›à¹€à¸”à¸—à¹‚à¸à¸ªà¸•à¹Œà¸ªà¸³à¹€à¸£à¹‡à¸ˆ!',
    UPDATE_ERROR: 'à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸­à¸±à¸›à¹€à¸”à¸—à¹‚à¸à¸ªà¸•à¹Œà¹„à¸”à¹‰',
    DELETE_SUCCESS: 'à¸¥à¸šà¹‚à¸à¸ªà¸•à¹Œà¸ªà¸³à¹€à¸£à¹‡à¸ˆ!',
    DELETE_ERROR: 'à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸šà¹‚à¸à¸ªà¸•à¹Œà¹„à¸”à¹‰',
    VOTE_ERROR: 'à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸§à¸•à¹„à¸”à¹‰',
    SAVE_SUCCESS: 'à¸šà¸±à¸™à¸—à¸¶à¸à¹‚à¸à¸ªà¸•à¹Œà¹à¸¥à¹‰à¸§',
    UNSAVE_SUCCESS: 'à¸¢à¸à¹€à¸¥à¸´à¸à¸à¸²à¸£à¸šà¸±à¸™à¸—à¸¶à¸à¹à¸¥à¹‰à¸§',
  },

  // Chat
  CHAT: {
    LOAD_ERROR: 'à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸à¸²à¸£à¹à¸Šà¸—à¹„à¸”à¹‰',
    SEND_SUCCESS: 'à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸ªà¸³à¹€à¸£à¹‡à¸ˆ',
    SEND_ERROR: 'à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹„à¸”à¹‰',
    LOGIN_REQUIRED: 'à¸à¸£à¸¸à¸“à¸²à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¸à¹ˆà¸­à¸™à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹à¸Šà¸—',
    DELETE_SUCCESS: 'à¸¥à¸šà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸ªà¸³à¹€à¸£à¹‡à¸ˆ',
    MARK_READ_ERROR: 'à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸—à¸³à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸«à¸¡à¸²à¸¢à¸§à¹ˆà¸²à¸­à¹ˆà¸²à¸™à¹à¸¥à¹‰à¸§',
  },

  // Comments
  COMMENT: {
    CREATE_SUCCESS: 'à¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ',
    CREATE_ERROR: 'à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¹„à¸”à¹‰',
    UPDATE_SUCCESS: 'à¹à¸à¹‰à¹„à¸‚à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ',
    DELETE_SUCCESS: 'à¸¥à¸šà¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ',
    DELETE_ERROR: 'à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸šà¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¹€à¸«à¹‡à¸™à¹„à¸”à¹‰',
  },

  // Profile
  PROFILE: {
    UPDATE_SUCCESS: 'à¸­à¸±à¸›à¹€à¸”à¸—à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œà¸ªà¸³à¹€à¸£à¹‡à¸ˆ!',
    UPDATE_ERROR: 'à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸­à¸±à¸›à¹€à¸”à¸—à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œà¹„à¸”à¹‰',
    FOLLOW_SUCCESS: 'à¸•à¸´à¸”à¸•à¸²à¸¡à¸ªà¸³à¹€à¸£à¹‡à¸ˆ',
    UNFOLLOW_SUCCESS: 'à¹€à¸¥à¸´à¸à¸•à¸´à¸”à¸•à¸²à¸¡à¸ªà¸³à¹€à¸£à¹‡à¸ˆ',
  },

  // Media Upload
  MEDIA: {
    UPLOAD_ERROR: 'à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¹„à¸Ÿà¸¥à¹Œà¹„à¸”à¹‰',
    FILE_TOO_LARGE: 'à¹„à¸Ÿà¸¥à¹Œà¸¡à¸µà¸‚à¸™à¸²à¸”à¹ƒà¸«à¸à¹ˆà¹€à¸à¸´à¸™à¹„à¸›',
    INVALID_FORMAT: 'à¸£à¸¹à¸›à¹à¸šà¸šà¹„à¸Ÿà¸¥à¹Œà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡',
  },

  // General
  GENERAL: {
    NETWORK_ERROR: 'à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­',
    UNKNOWN_ERROR: 'à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸—à¸£à¸²à¸šà¸ªà¸²à¹€à¸«à¸•à¸¸',
    COMING_SOON: 'à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¸™à¸µà¹‰à¸à¸³à¸¥à¸±à¸‡à¸à¸±à¸’à¸™à¸²',
  },
} as const;

// Helper function
export const showToast = {
  success: (message: string) => toast.success(message),
  error: (message: string) => toast.error(message),
  info: (message: string) => toast.info(message),
};
```

**à¸§à¸´à¸˜à¸µà¹ƒà¸Šà¹‰:**

```typescript
// âŒ à¸à¹ˆà¸­à¸™
toast.error('à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸à¸²à¸£à¹à¸Šà¸—à¹„à¸”à¹‰');

// âœ… à¸«à¸¥à¸±à¸‡
import { TOAST_MESSAGES } from '@/lib/config/toastMessages';
toast.error(TOAST_MESSAGES.CHAT.LOAD_ERROR);

// à¸«à¸£à¸·à¸­à¹ƒà¸Šà¹‰ helper
import { showToast, TOAST_MESSAGES } from '@/lib/config/toastMessages';
showToast.error(TOAST_MESSAGES.CHAT.LOAD_ERROR);
```

---

### B. Icons (à¸à¸šà¹ƒà¸™ 52 à¹„à¸Ÿà¸¥à¹Œ!)

**à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™:**
```typescript
// à¸—à¸¸à¸à¹„à¸Ÿà¸¥à¹Œ import à¹€à¸­à¸‡
import { Bell, MessageSquare, ThumbsUp, Heart } from "lucide-react";
import { Edit, Trash2, MoreHorizontal } from "lucide-react";
```

**à¹à¸à¹‰à¹„à¸‚:** à¸ªà¸£à¹‰à¸²à¸‡ `lib/config/icons.ts`

```typescript
// lib/config/icons.ts
export {
  // Navigation
  Home,
  Search,
  Bell,
  User,
  Settings,
  Menu,
  X,
  ChevronLeft,
  ChevronRight,
  ChevronDown,
  ChevronUp,

  // Social Actions
  Heart,
  MessageSquare,
  Share2,
  Bookmark,
  ThumbsUp,
  ThumbsDown,
  Send,

  // User Actions
  Edit,
  Trash2,
  MoreHorizontal,
  MoreVertical,
  Plus,
  Minus,
  Check,

  // Media
  Image as ImageIcon,
  Video,
  Upload,
  Camera,
  File,

  // Status
  AlertCircle,
  CheckCircle,
  Info,
  XCircle,
  Loader2,

  // Profile
  UserPlus,
  UserMinus,
  Users,
  AtSign,
  MapPin,
  Globe,
  Calendar,

  // Content
  Eye,
  EyeOff,
  Lock,
  Unlock,
  Star,
  Flag,

} from "lucide-react";

export type IconName = keyof typeof import("lucide-react");
```

**à¸ªà¸£à¹‰à¸²à¸‡ Icon Component:**

```typescript
// components/common/Icon.tsx
import * as Icons from '@/lib/config/icons';

type IconName = keyof typeof Icons;

interface IconProps {
  name: IconName;
  size?: number;
  className?: string;
  onClick?: () => void;
}

export const Icon: React.FC<IconProps> = ({
  name,
  size = 20,
  className = "",
  onClick
}) => {
  const IconComponent = Icons[name];

  if (!IconComponent) {
    console.warn(`Icon "${name}" not found`);
    return null;
  }

  return (
    <IconComponent
      size={size}
      className={className}
      onClick={onClick}
    />
  );
};

// Usage:
<Icon name="Bell" size={24} />
<Icon name="MessageSquare" className="text-primary" />
<Icon name="Heart" size={16} onClick={handleLike} />
```

**Icon Mapping Config:**

```typescript
// lib/config/iconMappings.ts
import type { IconName } from './icons';
import type { NotificationType } from '@/lib/types/models';

export const NOTIFICATION_ICONS: Record<NotificationType, IconName> = {
  reply: 'MessageSquare',
  vote: 'ThumbsUp',
  follow: 'UserPlus',
  mention: 'AtSign',
  message: 'Send',
};

export const POST_ACTION_ICONS = {
  like: 'Heart',
  comment: 'MessageSquare',
  share: 'Share2',
  bookmark: 'Bookmark',
  edit: 'Edit',
  delete: 'Trash2',
  more: 'MoreHorizontal',
} as const;
```

---

### C. Magic Numbers & Constants

**à¸à¸šà¸—à¸±à¹ˆà¸§à¹‚à¸„à¹‰à¸”:**
```typescript
// Pagination limits
limit: 20  // à¸à¸š 10+ à¸—à¸µà¹ˆ
limit: 50  // à¹ƒà¸™ messages

// Form limits
maxLength={300}  // Title
rows={8}         // Textarea
slice(0, 4)      // Max files

// Timeouts & Delays
reconnectDelay = 1000
pingInterval = 54000
```

**à¹à¸à¹‰à¹„à¸‚:** à¸ªà¸£à¹‰à¸²à¸‡ `lib/config/constants.ts`

```typescript
// lib/config/constants.ts

// Pagination
export const PAGINATION = {
  DEFAULT_LIMIT: 20,
  MESSAGE_LIMIT: 50,
  COMMENT_LIMIT: 20,
  LARGE_LIMIT: 100,
  INFINITE_SCROLL_THRESHOLD: 0.8, // 80% scrolled
} as const;

// Form Limits
export const FORM_LIMITS = {
  POST: {
    TITLE_MIN: 1,
    TITLE_MAX: 300,
    CONTENT_MIN: 1,
    CONTENT_MAX: 10000,
    TAGS_MAX: 5,
  },
  COMMENT: {
    CONTENT_MIN: 1,
    CONTENT_MAX: 2000,
  },
  USER: {
    USERNAME_MIN: 3,
    USERNAME_MAX: 30,
    DISPLAY_NAME_MAX: 50,
    BIO_MAX: 200,
    PASSWORD_MIN: 8,
  },
  CHAT: {
    MESSAGE_MAX: 2000,
  },
  MEDIA: {
    MAX_FILES: 4,
    MAX_SIZE_MB: 10,
    MAX_SIZE_BYTES: 10 * 1024 * 1024,
  },
} as const;

// WebSocket Configuration
export const WEBSOCKET = {
  MAX_RECONNECT_ATTEMPTS: 5,
  RECONNECT_DELAY_MS: 1000,
  MAX_RECONNECT_DELAY_MS: 60000,
  RECONNECT_MULTIPLIER: 2,
  PING_INTERVAL_MS: 54000,
  PING_TIMEOUT_MS: 5000,
  MESSAGE_QUEUE_SIZE: 100,
} as const;

// UI Configuration
export const UI = {
  TOAST_DURATION: 3000,
  TOOLTIP_DELAY: 200,
  DEBOUNCE_DELAY: 300,
  ANIMATION_DURATION: 200,
  SIDEBAR: {
    WIDTH: '16rem',
    WIDTH_MOBILE: '18rem',
    WIDTH_ICON: '3rem',
    COOKIE_NAME: 'sidebar_state',
    COOKIE_MAX_AGE: 60 * 60 * 24 * 7, // 7 days
  },
} as const;

// Time Constants
export const TIME = {
  SECOND: 1000,
  MINUTE: 60 * 1000,
  HOUR: 60 * 60 * 1000,
  DAY: 24 * 60 * 60 * 1000,
  WEEK: 7 * 24 * 60 * 60 * 1000,
} as const;

// Feature Flags (for future)
export const FEATURES = {
  ENABLE_CHAT: true,
  ENABLE_NOTIFICATIONS: true,
  ENABLE_VIDEO_UPLOAD: true,
  ENABLE_SEARCH: true,
  ENABLE_TAGS: true,
} as const;
```

**à¸§à¸´à¸˜à¸µà¹ƒà¸Šà¹‰:**

```typescript
// âŒ à¸à¹ˆà¸­à¸™
const response = await chatService.getMessages(id, { limit: 20 });
<Input maxLength={300} />
<Textarea rows={8} />

// âœ… à¸«à¸¥à¸±à¸‡
import { PAGINATION, FORM_LIMITS } from '@/lib/config/constants';

const response = await chatService.getMessages(id, {
  limit: PAGINATION.MESSAGE_LIMIT
});
<Input maxLength={FORM_LIMITS.POST.TITLE_MAX} />
<Textarea rows={8} /> // UI preference, OK to hardcode
```

---

### D. Validation Rules

**à¹à¸à¹‰à¹„à¸‚:** à¸ªà¸£à¹‰à¸²à¸‡ `lib/config/validation.ts`

```typescript
// lib/config/validation.ts
import { FORM_LIMITS } from './constants';

export const VALIDATION_RULES = {
  POST: {
    TITLE: {
      required: true,
      minLength: FORM_LIMITS.POST.TITLE_MIN,
      maxLength: FORM_LIMITS.POST.TITLE_MAX,
    },
    CONTENT: {
      required: false,
      maxLength: FORM_LIMITS.POST.CONTENT_MAX,
    },
  },
  USER: {
    USERNAME: {
      required: true,
      minLength: FORM_LIMITS.USER.USERNAME_MIN,
      maxLength: FORM_LIMITS.USER.USERNAME_MAX,
      pattern: /^[a-zA-Z0-9_]+$/,
    },
    EMAIL: {
      required: true,
      pattern: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
    },
    PASSWORD: {
      required: true,
      minLength: FORM_LIMITS.USER.PASSWORD_MIN,
      pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,
    },
  },
} as const;

export const VALIDATION_MESSAGES = {
  REQUIRED: 'à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥',
  EMAIL_INVALID: 'à¸­à¸µà¹€à¸¡à¸¥à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡',
  PASSWORD_TOO_SHORT: `à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¸•à¹‰à¸­à¸‡à¸¡à¸µà¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ ${FORM_LIMITS.USER.PASSWORD_MIN} à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£`,
  PASSWORD_WEAK: 'à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¸•à¹‰à¸­à¸‡à¸¡à¸µà¸•à¸±à¸§à¸à¸´à¸¡à¸à¹Œà¹€à¸¥à¹‡à¸ à¸à¸´à¸¡à¸à¹Œà¹ƒà¸«à¸à¹ˆ à¹à¸¥à¸°à¸•à¸±à¸§à¹€à¸¥à¸‚',
  USERNAME_TOO_SHORT: `à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸•à¹‰à¸­à¸‡à¸¡à¸µà¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ ${FORM_LIMITS.USER.USERNAME_MIN} à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£`,
  USERNAME_TOO_LONG: `à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸•à¹‰à¸­à¸‡à¹„à¸¡à¹ˆà¹€à¸à¸´à¸™ ${FORM_LIMITS.USER.USERNAME_MAX} à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£`,
  USERNAME_INVALID: 'à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸•à¹‰à¸­à¸‡à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£ à¸•à¸±à¸§à¹€à¸¥à¸‚ à¹à¸¥à¸° _ à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™',
  POST_TITLE_TOO_LONG: `à¸«à¸±à¸§à¸‚à¹‰à¸­à¸•à¹‰à¸­à¸‡à¹„à¸¡à¹ˆà¹€à¸à¸´à¸™ ${FORM_LIMITS.POST.TITLE_MAX} à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£`,
  CONTENT_TOO_LONG: `à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸•à¹‰à¸­à¸‡à¹„à¸¡à¹ˆà¹€à¸à¸´à¸™ {max} à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£`,
  URL_INVALID: 'à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸ URL à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡',
} as const;

// Validator helpers
export const validators = {
  isValidEmail: (email: string) =>
    VALIDATION_RULES.USER.EMAIL.pattern.test(email),

  isValidUrl: (url: string) => {
    try {
      new URL(url);
      return true;
    } catch {
      return false;
    }
  },

  isValidUsername: (username: string) =>
    VALIDATION_RULES.USER.USERNAME.pattern.test(username) &&
    username.length >= VALIDATION_RULES.USER.USERNAME.minLength &&
    username.length <= VALIDATION_RULES.USER.USERNAME.maxLength,
};
```

---

## ğŸ”„ 3. Code à¸‹à¹‰à¸³à¸‹à¹‰à¸­à¸™ (Duplicate Patterns)

### A. Loading States (à¸‹à¹‰à¸³ 15+ à¹„à¸Ÿà¸¥à¹Œ)

**à¸›à¸±à¸à¸«à¸²:**
```typescript
// à¸‹à¹‰à¸³à¸à¸±à¸™à¹ƒà¸™à¸—à¸¸à¸ page
if (isLoading) {
  return (
    <div className="text-center py-16">
      <div className="h-12 w-12 mx-auto animate-spin rounded-full border-4 border-gray-200 border-t-blue-500 mb-4"></div>
      <p className="text-muted-foreground">à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”...</p>
    </div>
  );
}
```

**à¹à¸à¹‰à¹„à¸‚:** à¸ªà¸£à¹‰à¸²à¸‡ Component

```typescript
// components/common/LoadingState.tsx
interface LoadingStateProps {
  message?: string;
  size?: 'sm' | 'md' | 'lg';
  fullPage?: boolean;
}

export const LoadingState: React.FC<LoadingStateProps> = ({
  message = 'à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”...',
  size = 'md',
  fullPage = false
}) => {
  const sizeClasses = {
    sm: 'h-8 w-8',
    md: 'h-12 w-12',
    lg: 'h-16 w-16',
  };

  const containerClass = fullPage
    ? 'min-h-screen flex items-center justify-center'
    : 'text-center py-16';

  return (
    <div className={containerClass}>
      <div>
        <div className={`
          ${sizeClasses[size]}
          mx-auto
          animate-spin
          rounded-full
          border-4
          border-muted
          border-t-primary
          mb-4
        `} />
        <p className="text-muted-foreground">{message}</p>
      </div>
    </div>
  );
};

// Usage:
<LoadingState message="à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ..." />
<LoadingState size="lg" fullPage />
```

---

### B. Error States (à¸‹à¹‰à¸³ 12+ à¹„à¸Ÿà¸¥à¹Œ)

**à¹à¸à¹‰à¹„à¸‚:** à¸ªà¸£à¹‰à¸²à¸‡ Component

```typescript
// components/common/ErrorState.tsx
interface ErrorStateProps {
  title?: string;
  message?: string | Error;
  actionLabel?: string;
  onAction?: () => void;
  icon?: IconName;
}

export const ErrorState: React.FC<ErrorStateProps> = ({
  title = 'à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”',
  message,
  actionLabel = 'à¸¥à¸­à¸‡à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡',
  onAction,
  icon = 'AlertCircle',
}) => {
  const errorMessage = message instanceof Error
    ? message.message
    : message || 'à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸—à¸£à¸²à¸šà¸ªà¸²à¹€à¸«à¸•à¸¸';

  return (
    <div className="text-center py-16">
      <Icon
        name={icon}
        className="mx-auto h-16 w-16 text-destructive mb-4"
      />
      <h2 className="text-2xl font-bold mb-2">{title}</h2>
      <p className="text-muted-foreground mb-6 max-w-md mx-auto">
        {errorMessage}
      </p>
      {onAction && (
        <Button onClick={onAction}>{actionLabel}</Button>
      )}
    </div>
  );
};

// Usage:
<ErrorState
  message={error}
  onAction={() => router.push('/')}
  actionLabel="à¸à¸¥à¸±à¸šà¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸"
/>
```

---

### C. Empty States (à¸‹à¹‰à¸³ 10+ à¹„à¸Ÿà¸¥à¹Œ)

**à¹à¸à¹‰à¹„à¸‚:** à¸ªà¸£à¹‰à¸²à¸‡ Component

```typescript
// components/common/EmptyState.tsx
interface EmptyStateProps {
  icon: IconName;
  title: string;
  description: string;
  action?: {
    label: string;
    onClick: () => void;
    variant?: 'default' | 'outline';
  };
}

export const EmptyState: React.FC<EmptyStateProps> = ({
  icon,
  title,
  description,
  action,
}) => {
  return (
    <Card>
      <CardContent className="py-16 text-center">
        <Icon
          name={icon}
          className="mx-auto h-16 w-16 text-muted-foreground/50 mb-4"
        />
        <h3 className="text-lg font-semibold mb-2">{title}</h3>
        <p className="text-muted-foreground mb-6 max-w-md mx-auto">
          {description}
        </p>
        {action && (
          <Button
            onClick={action.onClick}
            variant={action.variant || 'default'}
          >
            {action.label}
          </Button>
        )}
      </CardContent>
    </Card>
  );
};

// Usage:
<EmptyState
  icon="Bell"
  title="à¹„à¸¡à¹ˆà¸¡à¸µà¸à¸²à¸£à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™"
  description="à¹€à¸¡à¸·à¹ˆà¸­à¸¡à¸µà¸„à¸™à¹‚à¸•à¹‰à¸•à¸­à¸šà¸à¸±à¸šà¸„à¸¸à¸“ à¸„à¸¸à¸“à¸ˆà¸°à¹€à¸«à¹‡à¸™à¸à¸²à¸£à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¸—à¸µà¹ˆà¸™à¸µà¹ˆ"
/>

<EmptyState
  icon="MessageSquare"
  title="à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡"
  description="à¹€à¸£à¸´à¹ˆà¸¡à¸ªà¸™à¸—à¸™à¸²à¸à¸±à¸šà¹€à¸à¸·à¹ˆà¸­à¸™à¸‚à¸­à¸‡à¸„à¸¸à¸“"
  action={{
    label: "à¹€à¸£à¸´à¹ˆà¸¡à¹à¸Šà¸—",
    onClick: () => router.push('/chat'),
  }}
/>
```

---

### D. Avatar Component (à¹ƒà¸Šà¹‰à¸‹à¹‰à¸³ 20+ à¸—à¸µà¹ˆ)

**à¹à¸à¹‰à¹„à¸‚:**

```typescript
// components/common/Avatar.tsx
interface AvatarProps {
  src?: string | null;
  alt: string;
  size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl' | '2xl';
  fallback?: string;
  className?: string;
  showOnlineStatus?: boolean;
  isOnline?: boolean;
}

export const Avatar: React.FC<AvatarProps> = ({
  src,
  alt,
  size = 'md',
  fallback,
  className,
  showOnlineStatus = false,
  isOnline = false,
}) => {
  const sizes = {
    xs: 24,
    sm: 32,
    md: 40,
    lg: 64,
    xl: 96,
    '2xl': 128,
  };

  const onlineIndicatorSize = {
    xs: 'h-2 w-2',
    sm: 'h-2.5 w-2.5',
    md: 'h-3 w-3',
    lg: 'h-4 w-4',
    xl: 'h-5 w-5',
    '2xl': 'h-6 w-6',
  };

  const sizeValue = sizes[size];
  const fallbackText = fallback ? fallback.charAt(0).toUpperCase() : '?';

  return (
    <div
      className={`relative inline-block ${className}`}
      style={{ width: sizeValue, height: sizeValue }}
    >
      <div className="relative w-full h-full rounded-full overflow-hidden">
        {src ? (
          <Image
            src={src}
            alt={alt}
            fill
            className="object-cover"
          />
        ) : (
          <div className="w-full h-full flex items-center justify-center bg-primary/10 text-primary font-bold">
            {fallbackText}
          </div>
        )}
      </div>

      {showOnlineStatus && (
        <span
          className={`
            absolute bottom-0 right-0
            ${onlineIndicatorSize[size]}
            rounded-full border-2 border-background
            ${isOnline ? 'bg-green-500' : 'bg-gray-400'}
          `}
        />
      )}
    </div>
  );
};

// Usage:
<Avatar
  src={user.avatar}
  alt={user.displayName}
  fallback={user.displayName}
  size="lg"
  showOnlineStatus
  isOnline={true}
/>
```

---

## ğŸ“‚ 4. à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸—à¸µà¹ˆà¹à¸™à¸°à¸™à¸³

### à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™ (à¸¡à¸µà¸›à¸±à¸à¸«à¸²):
```
components/
â”œâ”€â”€ chat/ (14 files)
â”œâ”€â”€ comment/ (3 files)
â”œâ”€â”€ post/ (8 files)
â”œâ”€â”€ ui/ (26 files) â† à¹„à¸Ÿà¸¥à¹Œà¹ƒà¸«à¸à¹ˆà¸›à¸™
â”œâ”€â”€ user/ (2 files)
â””â”€â”€ ... à¸à¸£à¸°à¸ˆà¸±à¸”à¸à¸£à¸°à¸ˆà¸²à¸¢
```

### à¹à¸™à¸°à¸™à¸³ (à¸Šà¸±à¸”à¹€à¸ˆà¸™à¸‚à¸¶à¹‰à¸™):

```
nextjs-frontend/
â”œâ”€â”€ app/                           # Next.js App Router
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ common/                    # âœ¨ à¹ƒà¸«à¸¡à¹ˆ: Reusable components
â”‚   â”‚   â”œâ”€â”€ LoadingState.tsx
â”‚   â”‚   â”œâ”€â”€ ErrorState.tsx
â”‚   â”‚   â”œâ”€â”€ EmptyState.tsx
â”‚   â”‚   â”œâ”€â”€ Avatar.tsx
â”‚   â”‚   â””â”€â”€ Icon.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ui/                        # Shadcn UI components
â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”œâ”€â”€ sidebar/               # âœ¨ à¹à¸¢à¸: 726 à¸šà¸£à¸£à¸—à¸±à¸” â†’ à¸«à¸¥à¸²à¸¢à¹„à¸Ÿà¸¥à¹Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ constants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ SidebarContext.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                  # âœ¨ à¹ƒà¸«à¸¡à¹ˆ: Feature components
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx
â”‚   â”‚   â”‚   â””â”€â”€ RegisterForm.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ posts/
â”‚   â”‚   â”‚   â”œâ”€â”€ PostCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PostList.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CreatePostForm/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MediaUpload.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TagSelector.tsx
â”‚   â”‚   â”‚   â””â”€â”€ VoteButtons.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ comments/
â”‚   â”‚   â”‚   â”œâ”€â”€ CommentCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CommentTree.tsx
â”‚   â”‚   â”‚   â””â”€â”€ CommentForm.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatWindow/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChatHeader.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MessageList.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ChatInput.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â”‚   â”œâ”€â”€ ProfileHeader.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ProfileTabs.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ProfileStats.tsx
â”‚   â”‚   â”‚   â””â”€â”€ EditProfileForm.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ notifications/
â”‚   â”‚       â”œâ”€â”€ NotificationCard.tsx
â”‚   â”‚       â””â”€â”€ NotificationList.tsx
â”‚   â”‚
â”‚   â””â”€â”€ layouts/                   # Layout components
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ config/                    # âœ¨ à¹ƒà¸«à¸¡à¹ˆ: Centralized config
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ constants.ts           # Pagination, limits, etc.
â”‚   â”‚   â”œâ”€â”€ toastMessages.ts       # All toast text
â”‚   â”‚   â”œâ”€â”€ icons.ts               # Icon exports
â”‚   â”‚   â”œâ”€â”€ iconMappings.ts        # Icon mappings
â”‚   â”‚   â”œâ”€â”€ validation.ts          # Validation rules
â”‚   â”‚   â”œâ”€â”€ routes.ts              # App routes
â”‚   â”‚   â””â”€â”€ features.ts            # Feature flags
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ queries/
â”‚   â”‚   â”‚   â”œâ”€â”€ posts/             # âœ¨ à¹à¸¢à¸: 407 à¸šà¸£à¸£à¸—à¸±à¸” â†’ à¸«à¸¥à¸²à¸¢à¹„à¸Ÿà¸¥à¹Œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ queryKeys.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ usePostQueries.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ usePostInfiniteQueries.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ usePostMutations.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ comments/
â”‚   â”‚   â”‚   â”œâ”€â”€ users/
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ mutations/
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ common/                # âœ¨ à¹ƒà¸«à¸¡à¹ˆ: Common hooks
â”‚   â”‚       â”œâ”€â”€ useFormValidation.ts
â”‚   â”‚       â”œâ”€â”€ useMediaUpload.ts
â”‚   â”‚       â”œâ”€â”€ useInfiniteScroll.ts
â”‚   â”‚       â””â”€â”€ useDebounce.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/              # âœ¨ à¹à¸¢à¸: 405 à¸šà¸£à¸£à¸—à¸±à¸” â†’ à¸«à¸¥à¸²à¸¢à¹„à¸Ÿà¸¥à¹Œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ conversationService.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ messageService.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ searchService.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ blockService.ts
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ websocket/
â”‚   â”‚       â”œâ”€â”€ chatWebSocket.ts   # âœ¨ à¹à¸¢à¸: 559 â†’ 200 à¸šà¸£à¸£à¸—à¸±à¸”
â”‚   â”‚       â”œâ”€â”€ messageRouter.ts
â”‚   â”‚       â”œâ”€â”€ connectionManager.ts
â”‚   â”‚       â”œâ”€â”€ notificationHandler.ts
â”‚   â”‚       â””â”€â”€ config.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ authStore.ts
â”‚   â”‚   â””â”€â”€ chat/                  # âœ¨ à¹à¸¢à¸: 995 à¸šà¸£à¸£à¸—à¸±à¸” â†’ à¸«à¸¥à¸²à¸¢à¹„à¸Ÿà¸¥à¹Œ
â”‚   â”‚       â”œâ”€â”€ index.ts
â”‚   â”‚       â”œâ”€â”€ chatStore.ts       # State only
â”‚   â”‚       â”œâ”€â”€ chatTypes.ts       # Types
â”‚   â”‚       â”œâ”€â”€ chatSelectors.ts   # Selectors
â”‚   â”‚       â”œâ”€â”€ actions/
â”‚   â”‚       â”‚   â”œâ”€â”€ conversationActions.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ messageActions.ts
â”‚   â”‚       â”‚   â””â”€â”€ onlineStatusActions.ts
â”‚   â”‚       â””â”€â”€ helpers/
â”‚   â”‚           â”œâ”€â”€ messageHelpers.ts
â”‚   â”‚           â””â”€â”€ conversationHelpers.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ common.ts
â”‚   â”‚   â”œâ”€â”€ models/                # âœ¨ à¹à¸¢à¸: à¸•à¸²à¸¡ domain
â”‚   â”‚   â”‚   â”œâ”€â”€ user.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ post.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ comment.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ notification.ts
â”‚   â”‚   â”‚   â””â”€â”€ media.ts
â”‚   â”‚   â”œâ”€â”€ requests/
â”‚   â”‚   â””â”€â”€ responses/
â”‚   â”‚
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ validation.ts          # âœ¨ à¹ƒà¸«à¸¡à¹ˆ: Validators
â”‚       â”œâ”€â”€ formatting.ts
â”‚       â”œâ”€â”€ date.ts
â”‚       â””â”€â”€ share.ts
â”‚
â””â”€â”€ public/
```

---

## ğŸ¯ 5. à¹à¸œà¸™à¸à¸²à¸£ Refactor (Priority)

### Phase 1: Foundation (à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œà¸—à¸µà¹ˆ 1-2) ğŸ”´ Critical

**à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢:** à¸ªà¸£à¹‰à¸²à¸‡à¸à¸²à¸™à¸£à¸²à¸à¸—à¸µà¹ˆà¸”à¸µ

#### Week 1: Create Config Structure

```bash
# Day 1-2: Create config files
lib/config/
â”œâ”€â”€ constants.ts        âœ… Create
â”œâ”€â”€ toastMessages.ts    âœ… Create
â”œâ”€â”€ icons.ts            âœ… Create
â”œâ”€â”€ iconMappings.ts     âœ… Create
â””â”€â”€ validation.ts       âœ… Create

# Day 3-4: Create common components
components/common/
â”œâ”€â”€ LoadingState.tsx    âœ… Create
â”œâ”€â”€ ErrorState.tsx      âœ… Create
â”œâ”€â”€ EmptyState.tsx      âœ… Create
â”œâ”€â”€ Avatar.tsx          âœ… Create
â””â”€â”€ Icon.tsx            âœ… Create

# Day 5: Update imports
- Replace hardcoded toast messages (21 files)
- Replace icon imports (52 files)
- Replace magic numbers
```

**à¸„à¸°à¹à¸™à¸™à¸œà¸¥à¸à¸£à¸°à¸—à¸š:** 9/10
**à¸„à¸§à¸²à¸¡à¸¢à¸²à¸:** 3/10
**à¹€à¸§à¸¥à¸²:** ~16 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡

---

#### Week 2: Split Type Files

```bash
# Split models.ts (349 lines)
lib/types/models/
â”œâ”€â”€ user.ts         âœ… Extract User types
â”œâ”€â”€ post.ts         âœ… Extract Post types
â”œâ”€â”€ comment.ts      âœ… Extract Comment types
â”œâ”€â”€ chat.ts         âœ… Extract Chat types
â”œâ”€â”€ notification.ts âœ… Extract Notification types
â””â”€â”€ media.ts        âœ… Extract Media types

# Split response.ts (378 lines)
lib/types/responses/
â”œâ”€â”€ auth.ts         âœ… Extract auth responses
â”œâ”€â”€ post.ts         âœ… Extract post responses
â”œâ”€â”€ comment.ts      âœ… Extract comment responses
â””â”€â”€ chat.ts         âœ… Extract chat responses
```

**à¸„à¸°à¹à¸™à¸™à¸œà¸¥à¸à¸£à¸°à¸—à¸š:** 7/10
**à¸„à¸§à¸²à¸¡à¸¢à¸²à¸:** 2/10
**à¹€à¸§à¸¥à¸²:** ~8 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡

---

### Phase 2: Critical Files (à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œà¸—à¸µà¹ˆ 3-4) ğŸ”´ Critical

#### Week 3: Split chatStore.ts (995 lines)

```bash
# Priority: #1 - à¹„à¸Ÿà¸¥à¹Œà¹ƒà¸«à¸à¹ˆà¸—à¸µà¹ˆà¸ªà¸¸à¸”

lib/stores/chat/
â”œâ”€â”€ index.ts                    âœ… Main export
â”œâ”€â”€ chatStore.ts                âœ… State (150 lines)
â”œâ”€â”€ chatTypes.ts                âœ… Types (150 lines)
â”œâ”€â”€ chatSelectors.ts            âœ… Selectors (100 lines)
â”œâ”€â”€ actions/
â”‚   â”œâ”€â”€ conversationActions.ts  âœ… (200 lines)
â”‚   â”œâ”€â”€ messageActions.ts       âœ… (200 lines)
â”‚   â””â”€â”€ onlineStatusActions.ts  âœ… (100 lines)
â””â”€â”€ helpers/
    â”œâ”€â”€ messageHelpers.ts       âœ… (100 lines)
    â””â”€â”€ conversationHelpers.ts  âœ… (100 lines)

# Update imports in all chat-related files
```

**à¸„à¸°à¹à¸™à¸™à¸œà¸¥à¸à¸£à¸°à¸—à¸š:** 10/10 ğŸ”¥
**à¸„à¸§à¸²à¸¡à¸¢à¸²à¸:** 8/10
**à¹€à¸§à¸¥à¸²:** ~24 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡

---

#### Week 4: Split sidebar.tsx (726 lines)

```bash
# Priority: #2

components/ui/sidebar/
â”œâ”€â”€ index.ts                âœ… Export all
â”œâ”€â”€ constants.ts            âœ… Constants
â”œâ”€â”€ SidebarContext.tsx      âœ… Context (150 lines)
â”œâ”€â”€ SidebarProvider.tsx     âœ… Provider (120 lines)
â”œâ”€â”€ Sidebar.tsx             âœ… Main (100 lines)
â”œâ”€â”€ SidebarMenu.tsx         âœ… Menu (150 lines)
â””â”€â”€ components/
    â”œâ”€â”€ SidebarHeader.tsx   âœ…
    â”œâ”€â”€ SidebarContent.tsx  âœ…
    â”œâ”€â”€ SidebarFooter.tsx   âœ…
    â””â”€â”€ ... (10 more)

# Update imports across app
```

**à¸„à¸°à¹à¸™à¸™à¸œà¸¥à¸à¸£à¸°à¸—à¸š:** 8/10
**à¸„à¸§à¸²à¸¡à¸¢à¸²à¸:** 6/10
**à¹€à¸§à¸¥à¸²:** ~16 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡

---

### Phase 3: Large Services (à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œà¸—à¸µà¹ˆ 5) ğŸŸ¡ High

```bash
# Priority: #3-5

# Split chatWebSocket.ts (559 lines)
lib/services/websocket/
â”œâ”€â”€ chatWebSocket.ts        âœ… Client (200 lines)
â”œâ”€â”€ messageRouter.ts        âœ… Routing (150 lines)
â”œâ”€â”€ connectionManager.ts    âœ… Connection (100 lines)
â”œâ”€â”€ notificationHandler.ts  âœ… Notifications (100 lines)
â””â”€â”€ config.ts               âœ… Config (50 lines)

# Split chat.service.ts (405 lines)
lib/services/api/chat/
â”œâ”€â”€ conversationService.ts  âœ… (120 lines)
â”œâ”€â”€ messageService.ts       âœ… (120 lines)
â”œâ”€â”€ searchService.ts        âœ… (60 lines)
â””â”€â”€ blockService.ts         âœ… (60 lines)

# Split usePosts.ts (407 lines)
lib/hooks/queries/posts/
â”œâ”€â”€ queryKeys.ts            âœ… (50 lines)
â”œâ”€â”€ usePostQueries.ts       âœ… (150 lines)
â”œâ”€â”€ usePostInfiniteQueries.ts âœ… (150 lines)
â””â”€â”€ usePostMutations.ts     âœ… (200 lines)
```

**à¸„à¸°à¹à¸™à¸™à¸œà¸¥à¸à¸£à¸°à¸—à¸š:** 9/10
**à¸„à¸§à¸²à¸¡à¸¢à¸²à¸:** 7/10
**à¹€à¸§à¸¥à¸²:** ~32 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡

---

### Phase 4: Pages & Components (à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œà¸—à¸µà¹ˆ 6-7) ğŸŸ¡ Medium

```bash
# Week 6: Refactor pages

# app/profile/edit/page.tsx (410 lines)
app/profile/edit/
â”œâ”€â”€ page.tsx                âœ… Layout (100 lines)
â”œâ”€â”€ EditProfileForm.tsx     âœ… Form (150 lines)
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useProfileForm.ts   âœ… (100 lines)
â”‚   â””â”€â”€ useAvatarUpload.ts  âœ… (60 lines)
â””â”€â”€ validation.ts           âœ… (50 lines)

# app/profile/[username]/page.tsx (395 lines)
app/profile/[username]/
â”œâ”€â”€ page.tsx                âœ… Data layer (100 lines)
â”œâ”€â”€ ProfileView.tsx         âœ… Layout (100 lines)
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useProfileData.ts   âœ… (80 lines)
â”‚   â””â”€â”€ useProfileTabs.ts   âœ… (40 lines)
â””â”€â”€ components/
    â”œâ”€â”€ ProfileHeader.tsx   âœ… (120 lines)
    â”œâ”€â”€ ProfileTabs.tsx     âœ… (60 lines)
    â””â”€â”€ ProfileStats.tsx    âœ… (40 lines)
```

```bash
# Week 7: Refactor large components

# components/post/CreatePostForm.tsx (368 lines)
components/features/posts/CreatePostForm/
â”œâ”€â”€ index.tsx               âœ… Main (100 lines)
â”œâ”€â”€ MediaUpload.tsx         âœ… (100 lines)
â”œâ”€â”€ TagSelector.tsx         âœ… (80 lines)
â””â”€â”€ hooks/
    â”œâ”€â”€ usePostForm.ts      âœ… (100 lines)
    â””â”€â”€ useMediaUpload.ts   âœ… (100 lines)
```

**à¸„à¸°à¹à¸™à¸™à¸œà¸¥à¸à¸£à¸°à¸—à¸š:** 7/10
**à¸„à¸§à¸²à¸¡à¸¢à¸²à¸:** 5/10
**à¹€à¸§à¸¥à¸²:** ~40 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡

---

### Phase 5: Replace Duplicates (à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œà¸—à¸µà¹ˆ 8) ğŸŸ¢ Low

```bash
# Replace all duplicate patterns

# Loading states (15 files)
- Replace with <LoadingState />

# Error states (12 files)
- Replace with <ErrorState />

# Empty states (10 files)
- Replace with <EmptyState />

# Avatar displays (20 files)
- Replace with <Avatar />

# Icon usages (50+ files)
- Use <Icon name="..." /> or config mappings
```

**à¸„à¸°à¹à¸™à¸™à¸œà¸¥à¸à¸£à¸°à¸—à¸š:** 8/10
**à¸„à¸§à¸²à¸¡à¸¢à¸²à¸:** 3/10
**à¹€à¸§à¸¥à¸²:** ~24 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡

---

### Phase 6: Testing & Docs (à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œà¸—à¸µà¹ˆ 9-10) ğŸŸ¢ Low

```bash
# Week 9: Add tests
- Unit tests for extracted utilities
- Integration tests for refactored stores
- Component tests for common components

# Week 10: Documentation
- Update README with new structure
- Document config files usage
- Create migration guide
- Code review & refinements
```

**à¸„à¸°à¹à¸™à¸™à¸œà¸¥à¸à¸£à¸°à¸—à¸š:** 5/10
**à¸„à¸§à¸²à¸¡à¸¢à¸²à¸:** 4/10
**à¹€à¸§à¸¥à¸²:** ~32 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡

---

## ğŸ“Š 6. Summary & Metrics

### à¸ˆà¸³à¸™à¸§à¸™à¸‡à¸²à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”

| Phase | à¹€à¸§à¸¥à¸² | à¸„à¸§à¸²à¸¡à¸ªà¸³à¸„à¸±à¸ | à¸œà¸¥à¸à¸£à¸°à¸—à¸š |
|-------|------|----------|----------|
| Phase 1: Foundation | 24 à¸Šà¸¡ | ğŸ”´ Critical | à¸ªà¸¹à¸‡à¸¡à¸²à¸ |
| Phase 2: Critical Files | 40 à¸Šà¸¡ | ğŸ”´ Critical | à¸ªà¸¹à¸‡à¸¡à¸²à¸ |
| Phase 3: Large Services | 32 à¸Šà¸¡ | ğŸŸ¡ High | à¸ªà¸¹à¸‡ |
| Phase 4: Pages/Components | 40 à¸Šà¸¡ | ğŸŸ¡ Medium | à¸›à¸²à¸™à¸à¸¥à¸²à¸‡ |
| Phase 5: Replace Duplicates | 24 à¸Šà¸¡ | ğŸŸ¢ Low | à¸ªà¸¹à¸‡ |
| Phase 6: Testing/Docs | 32 à¸Šà¸¡ | ğŸŸ¢ Low | à¸›à¸²à¸™à¸à¸¥à¸²à¸‡ |
| **à¸£à¸§à¸¡** | **192 à¸Šà¸¡** | - | - |

### à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢à¸«à¸¥à¸±à¸‡ Refactor

**Before:**
```
âŒ à¹„à¸Ÿà¸¥à¹Œà¹ƒà¸«à¸à¹ˆ: 3 à¹„à¸Ÿà¸¥à¹Œ (>500 à¸šà¸£à¸£à¸—à¸±à¸”)
âŒ Hardcoded text: 21 à¹„à¸Ÿà¸¥à¹Œ
âŒ Icon imports: 52 à¹„à¸Ÿà¸¥à¹Œ
âŒ Duplicate code: 15+ patterns
âŒ Magic numbers: à¸—à¸±à¹ˆà¸§à¹‚à¸„à¹‰à¸”
```

**After:**
```
âœ… à¹„à¸Ÿà¸¥à¹Œà¹€à¸¥à¹‡à¸: à¹€à¸‰à¸¥à¸µà¹ˆà¸¢ <200 à¸šà¸£à¸£à¸—à¸±à¸”
âœ… Config centralized: 5 à¹„à¸Ÿà¸¥à¹Œ config
âœ… Icon system: 1 à¹„à¸Ÿà¸¥à¹Œ + component
âœ… Reusable components: 5 common components
âœ… Clean constants: à¹à¸¢à¸à¸Šà¸±à¸”à¹€à¸ˆà¸™
```

---

## ğŸš€ 7. à¸§à¸´à¸˜à¸µà¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™

### à¹à¸™à¸°à¸™à¸³: à¸—à¸³à¸—à¸µà¸¥à¸° Phase à¸­à¸¢à¹ˆà¸² rush!

#### à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œà¸™à¸µà¹‰ (Week 1): Foundation

```bash
# 1. à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ
mkdir -p lib/config
mkdir -p components/common

# 2. à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ config à¸à¸·à¹‰à¸™à¸à¸²à¸™
touch lib/config/constants.ts
touch lib/config/toastMessages.ts
touch lib/config/icons.ts

# 3. Copy code à¸ˆà¸²à¸à¸£à¸²à¸¢à¸‡à¸²à¸™à¸™à¸µà¹‰à¹„à¸›à¹ƒà¸ªà¹ˆ

# 4. à¸ªà¸£à¹‰à¸²à¸‡ common components
touch components/common/LoadingState.tsx
touch components/common/ErrorState.tsx
touch components/common/EmptyState.tsx

# 5. Copy code à¸ˆà¸²à¸à¸£à¸²à¸¢à¸‡à¸²à¸™à¸™à¸µà¹‰à¹„à¸›à¹ƒà¸ªà¹ˆ

# 6. à¸—à¸”à¸ªà¸­à¸š import à¹ƒà¸™ 1-2 à¹„à¸Ÿà¸¥à¹Œà¸à¹ˆà¸­à¸™

# 7. à¸„à¹ˆà¸­à¸¢à¹† replace à¹„à¸Ÿà¸¥à¹Œà¸­à¸·à¹ˆà¸™
```

#### à¹€à¸„à¸¥à¹‡à¸”à¸¥à¸±à¸š:

1. **à¸—à¸³à¸—à¸µà¸¥à¸°à¸™à¹‰à¸­à¸¢** - à¸­à¸¢à¹ˆà¸² refactor à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸à¸£à¹‰à¸­à¸¡à¸à¸±à¸™
2. **Test à¸«à¸¥à¸±à¸‡à¹à¸à¹‰** - à¸—à¸”à¸ªà¸­à¸šà¸«à¸¥à¸±à¸‡à¹à¸à¹‰à¹à¸•à¹ˆà¸¥à¸°à¹„à¸Ÿà¸¥à¹Œ
3. **Git commit à¸šà¹ˆà¸­à¸¢à¹†** - Commit à¸«à¸¥à¸±à¸‡à¹à¸à¹‰à¹€à¸ªà¸£à¹‡à¸ˆà¹à¸•à¹ˆà¸¥à¸°à¹„à¸Ÿà¸¥à¹Œ
4. **à¹€à¸£à¸´à¹ˆà¸¡à¸ˆà¸²à¸ Phase 1** - à¸ªà¸£à¹‰à¸²à¸‡à¸à¸²à¸™à¸à¹ˆà¸­à¸™
5. **à¹ƒà¸Šà¹‰ Find & Replace** - à¹ƒà¸Šà¹‰ VS Code find/replace à¸Šà¹ˆà¸§à¸¢

---

## ğŸ’¡ 8. à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡ Migration

### à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡: à¹à¸à¹‰ Toast Messages

**à¸à¹ˆà¸­à¸™:**
```typescript
// app/chat/page.tsx
toast.error('à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸à¸²à¸£à¹à¸Šà¸—à¹„à¸”à¹‰');
toast.success('à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸ªà¸³à¹€à¸£à¹‡à¸ˆ');

// components/post/CreatePostForm.tsx
toast.error('à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸à¸ªà¸•à¹Œà¹„à¸”à¹‰');
toast.success('à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸à¸ªà¸•à¹Œà¸ªà¸³à¹€à¸£à¹‡à¸ˆ!');
```

**à¸«à¸¥à¸±à¸‡:**
```typescript
// 1. à¸ªà¸£à¹‰à¸²à¸‡ lib/config/toastMessages.ts (copy à¸ˆà¸²à¸à¸”à¹‰à¸²à¸™à¸šà¸™)

// 2. à¹à¸à¹‰ app/chat/page.tsx
import { TOAST_MESSAGES } from '@/lib/config/toastMessages';

toast.error(TOAST_MESSAGES.CHAT.LOAD_ERROR);
toast.success(TOAST_MESSAGES.CHAT.SEND_SUCCESS);

// 3. à¹à¸à¹‰ components/post/CreatePostForm.tsx
import { TOAST_MESSAGES } from '@/lib/config/toastMessages';

toast.error(TOAST_MESSAGES.POST.CREATE_ERROR);
toast.success(TOAST_MESSAGES.POST.CREATE_SUCCESS);
```

### à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡: Replace Loading State

**à¸à¹ˆà¸­à¸™:**
```typescript
// app/profile/[username]/page.tsx
if (isLoading) {
  return (
    <AppLayout breadcrumbs={breadcrumbs}>
      <div className="text-center py-16">
        <div className="h-12 w-12 mx-auto animate-spin rounded-full border-4 border-gray-200 border-t-blue-500 mb-4"></div>
        <p className="text-muted-foreground">à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”...</p>
      </div>
    </AppLayout>
  );
}
```

**à¸«à¸¥à¸±à¸‡:**
```typescript
// 1. à¸ªà¸£à¹‰à¸²à¸‡ components/common/LoadingState.tsx (copy à¸ˆà¸²à¸à¸”à¹‰à¸²à¸™à¸šà¸™)

// 2. à¹à¸à¹‰ app/profile/[username]/page.tsx
import { LoadingState } from '@/components/common/LoadingState';

if (isLoading) {
  return (
    <AppLayout breadcrumbs={breadcrumbs}>
      <LoadingState message="à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ..." />
    </AppLayout>
  );
}
```

---

## âœ… 9. Checklist

### Phase 1: Foundation
- [ ] à¸ªà¸£à¹‰à¸²à¸‡ `lib/config/constants.ts`
- [ ] à¸ªà¸£à¹‰à¸²à¸‡ `lib/config/toastMessages.ts`
- [ ] à¸ªà¸£à¹‰à¸²à¸‡ `lib/config/icons.ts`
- [ ] à¸ªà¸£à¹‰à¸²à¸‡ `lib/config/validation.ts`
- [ ] à¸ªà¸£à¹‰à¸²à¸‡ `components/common/LoadingState.tsx`
- [ ] à¸ªà¸£à¹‰à¸²à¸‡ `components/common/ErrorState.tsx`
- [ ] à¸ªà¸£à¹‰à¸²à¸‡ `components/common/EmptyState.tsx`
- [ ] à¸ªà¸£à¹‰à¸²à¸‡ `components/common/Avatar.tsx`
- [ ] à¸ªà¸£à¹‰à¸²à¸‡ `components/common/Icon.tsx`
- [ ] Replace toast messages (21 files)
- [ ] Replace icon imports (52 files)

### Phase 2: Critical Files
- [ ] Split `chatStore.ts` (995 â†’ 7 files)
- [ ] Split `sidebar.tsx` (726 â†’ 15 files)
- [ ] Update all imports

### Phase 3: Large Services
- [ ] Split `chatWebSocket.ts` (559 â†’ 5 files)
- [ ] Split `chat.service.ts` (405 â†’ 4 files)
- [ ] Split `usePosts.ts` (407 â†’ 4 files)

### Phase 4: Pages & Components
- [ ] Refactor `app/profile/edit/page.tsx`
- [ ] Refactor `app/profile/[username]/page.tsx`
- [ ] Refactor `app/notifications/page.tsx`
- [ ] Refactor `CreatePostForm.tsx`

### Phase 5: Replace Duplicates
- [ ] Replace loading states (15 files)
- [ ] Replace error states (12 files)
- [ ] Replace empty states (10 files)
- [ ] Replace avatar displays (20 files)

### Phase 6: Testing & Docs
- [ ] Add unit tests
- [ ] Update documentation
- [ ] Code review

---

## ğŸ¯ à¸ªà¸£à¸¸à¸›

### à¸›à¸£à¸°à¹‚à¸¢à¸Šà¸™à¹Œà¸‚à¸­à¸‡à¸à¸²à¸£ Refactor

1. **à¹à¸¢à¸à¸ªà¹ˆà¸§à¸™à¸Šà¸±à¸”à¹€à¸ˆà¸™** - à¹à¸•à¹ˆà¸¥à¸°à¹„à¸Ÿà¸¥à¹Œà¸¡à¸µà¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆà¹€à¸”à¸µà¸¢à¸§
2. **à¹à¸à¹‰à¹„à¸‚à¸‡à¹ˆà¸²à¸¢** - à¸£à¸¹à¹‰à¸§à¹ˆà¸²à¸•à¹‰à¸­à¸‡à¹à¸à¹‰à¸—à¸µà¹ˆà¹„à¸«à¸™
3. **à¸‚à¸¢à¸²à¸¢à¸‡à¸²à¸™à¸ªà¸°à¸”à¸§à¸** - à¹€à¸à¸´à¹ˆà¸¡à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¸‡à¹ˆà¸²à¸¢à¸‚à¸¶à¹‰à¸™
4. **Maintenance à¸‡à¹ˆà¸²à¸¢** - à¹„à¸Ÿà¸¥à¹Œà¹€à¸¥à¹‡à¸ à¸­à¹ˆà¸²à¸™à¸‡à¹ˆà¸²à¸¢
5. **DRY Principle** - à¹„à¸¡à¹ˆà¹€à¸‚à¸µà¸¢à¸™à¹‚à¸„à¹‰à¸”à¸‹à¹‰à¸³
6. **Type Safety** - Types à¹à¸¢à¸à¸Šà¸±à¸”à¹€à¸ˆà¸™
7. **Config Centralized** - à¹à¸à¹‰à¸—à¸µà¹ˆà¹€à¸”à¸µà¸¢à¸§ à¹ƒà¸Šà¹‰à¸—à¸¸à¸à¸—à¸µà¹ˆ

### à¸„à¸³à¹à¸™à¸°à¸™à¸³à¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢

- âœ… **à¹€à¸£à¸´à¹ˆà¸¡à¸ˆà¸²à¸ Phase 1** - à¸ªà¸£à¹‰à¸²à¸‡à¸à¸²à¸™à¸—à¸µà¹ˆà¸”à¸µ
- âœ… **à¸—à¸³à¸—à¸µà¸¥à¸°à¸™à¹‰à¸­à¸¢** - à¸­à¸¢à¹ˆà¸² rush
- âœ… **Test à¸šà¹ˆà¸­à¸¢à¹†** - à¸«à¸¥à¸±à¸‡à¹à¸à¹‰à¹à¸•à¹ˆà¸¥à¸°à¹„à¸Ÿà¸¥à¹Œ
- âœ… **Git commit** - à¸šà¸±à¸™à¸—à¸¶à¸à¸„à¸§à¸²à¸¡à¸à¹‰à¸²à¸§à¸«à¸™à¹‰à¸²
- âœ… **à¹ƒà¸Šà¹‰à¹€à¸§à¸¥à¸² 10 à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ** - à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸£à¸µà¸š

**Good luck! ğŸ’ª**

---

**Last Updated:** November 8, 2025
**à¹„à¸Ÿà¸¥à¹Œà¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡:**
- `/refactor_code/2.split_files_guide.md` (Coming next)
- `/refactor_code/3.config_examples.md` (Coming next)
- `/refactor_code/4.component_examples.md` (Coming next)

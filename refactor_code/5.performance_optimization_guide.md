# Performance Optimization Guide: SSR vs SSG vs CSR

> **‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì**: ‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ CSR ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ ‡∏ã‡∏∂‡πà‡∏á**‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°**‡∏Å‡∏±‡∏ö social media app ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ
>
> **‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å**: `export const dynamic = 'force-dynamic'` ‡πÉ‡∏ô root layout ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô dynamic rendering ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
>
> **‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á**: ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô **60-90%** ‡πÉ‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡πÜ ‡∏´‡∏ô‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ ISR

---

## üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö

1. **Root Layout ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô Dynamic** ‚ö†Ô∏è CRITICAL
   ```typescript
   // app/layout.tsx
   export const dynamic = 'force-dynamic'; // ‚Üê ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ!
   await headers(); // ‚Üê ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô dynamic
   ```
   **‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö**: ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ SSG ‡∏´‡∏£‡∏∑‡∏≠ ISR ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢

2. **‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏ä‡πâ CSR ‡πÅ‡∏°‡πâ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô**
   - `/post/[id]` - ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô ISR (‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÑ‡∏°‡πà‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)
   - `/profile/[username]` - ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô ISR (‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)
   - `/login`, `/register` - ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô SSG (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô)

3. **‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£ Cache ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•**
   - ‡∏ó‡∏∏‡∏Å request ‡πÑ‡∏õ‡∏´‡∏≤ backend ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
   - ‡πÑ‡∏°‡πà‡∏°‡∏µ revalidation strategy

---

## üéØ ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à SSR vs SSG vs CSR vs ISR

### 1. CSR (Client-Side Rendering) - ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ

**‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: ‡∏™‡πà‡∏á HTML ‡πÄ‡∏õ‡∏•‡πà‡∏≤‡πÑ‡∏õ ‚Üí JavaScript render ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ö‡∏ô browser

```typescript
"use client";

export default function Page() {
  const { data } = useQuery(); // Fetch on browser
  return <div>{data}</div>;
}
```

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ**:
- ‚úÖ Real-time updates ‡∏á‡πà‡∏≤‡∏¢
- ‚úÖ Interactive ‡πÑ‡∏î‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà
- ‚úÖ ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡∏°‡∏≤‡∏Å

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢**:
- ‚ùå **Slow initial load** (‡∏£‡∏≠ JS download + run + fetch data)
- ‚ùå **‡πÅ‡∏¢‡πà‡∏°‡∏≤‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö SEO** (Google ‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡∏•‡πà‡∏≤)
- ‚ùå **‡πÅ‡∏¢‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Social Share** (Facebook/Twitter ‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô OG tags)
- ‚ùå **‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡∏ö‡∏ô browser** (‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏ä‡πâ‡∏≤)

**‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà**:
- ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô user-specific (chat, notifications, my-posts)
- ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ real-time updates (chat messages)
- ‚úÖ ‡∏°‡∏µ complex interactions (forms, file uploads)

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏Ñ‡∏∏‡∏ì**:
- `/chat` ‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (real-time)
- `/notifications` ‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (user-specific)
- `/create-post` ‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (form with file upload)

---

### 2. SSR (Server-Side Rendering)

**‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: Server render HTML ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà request ‚Üí ‡∏™‡πà‡∏á HTML ‡πÄ‡∏ï‡πá‡∏°‡∏°‡∏≤

```typescript
// ‡πÑ‡∏°‡πà‡∏°‡∏µ "use client"
export default async function Page() {
  const data = await fetch('...', { cache: 'no-store' });
  return <div>{data}</div>;
}
```

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ**:
- ‚úÖ **Fast initial load** (HTML ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ)
- ‚úÖ **SEO-friendly** (Google ‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡∏ô‡∏ó‡∏µ)
- ‚úÖ **Social share ‡πÑ‡∏î‡πâ** (OG tags ‡∏û‡∏£‡πâ‡∏≠‡∏°)
- ‚úÖ **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• fresh ‡∏ï‡∏•‡∏≠‡∏î**

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢**:
- ‚ùå **Slow TTFB** (‡∏£‡∏≠ server ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô)
- ‚ùå **‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡∏ö‡∏ô server** (‡∏ó‡∏∏‡∏Å request)
- ‚ùå **‡πÑ‡∏°‡πà cache ‡πÑ‡∏î‡πâ** (‡∏ï‡πâ‡∏≠‡∏á render ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á)

**‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà**:
- ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ö‡πà‡∏≠‡∏¢‡∏°‡∏≤‡∏Å ‡πÅ‡∏•‡∏∞ SEO ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç
- ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô user-specific ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ SEO
- ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ fresh data ‡∏ï‡∏•‡∏≠‡∏î

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏Ñ‡∏∏‡∏ì**:
- `/edit-post/[id]` ‚Üí ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ SSR (check auth + fetch post data)

---

### 3. SSG (Static Site Generation)

**‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: Build ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‚Üí serve HTML ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô

```typescript
export const dynamic = 'error'; // ‡∏´‡πâ‡∏≤‡∏° dynamic
export const revalidate = false; // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á revalidate

export default async function Page() {
  const data = await fetch('...'); // Build time only
  return <div>{data}</div>;
}
```

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ**:
- ‚úÖ **SUPER FAST** (HTML static ‡∏à‡∏≤‡∏Å CDN)
- ‚úÖ **‡∏ñ‡∏π‡∏Å‡∏°‡∏≤‡∏Å** (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ server)
- ‚úÖ **SEO perfect**
- ‚úÖ **Scale ‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î**

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢**:
- ‚ùå **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡πÑ‡∏î‡πâ** (update ‡∏ï‡∏≠‡∏ô build ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
- ‚ùå **Build ‡∏ô‡∏≤‡∏ô** (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤)
- ‚ùå **‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô**

**‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà**:
- ‚úÖ ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô (landing, about, login page)
- ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏•‡∏¢ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏ô‡∏≤‡∏ô‡πÜ ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
- ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏Ñ‡∏∏‡∏ì**:
- `/login` ‚Üí ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ SSG (‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)
- `/register` ‚Üí ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ SSG (‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)

---

### 4. ISR (Incremental Static Regeneration) - ‚≠ê ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì!

**‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: SSG + auto refresh ‡∏ó‡∏∏‡∏Å‡πÜ X ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí best of both worlds

```typescript
export const revalidate = 300; // 5 minutes

export default async function Page() {
  const data = await fetch('...');
  return <div>{data}</div>;
}
```

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ**:
- ‚úÖ **FAST** (serve ‡∏à‡∏≤‡∏Å cache)
- ‚úÖ **SEO perfect**
- ‚úÖ **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• fresh** (auto update ‡∏ó‡∏∏‡∏Å‡πÜ 5 ‡∏ô‡∏≤‡∏ó‡∏µ)
- ‚úÖ **‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ö‡∏ô background** (user ‡πÑ‡∏°‡πà‡∏£‡∏≠)
- ‚úÖ **Scale ‡πÑ‡∏î‡πâ‡∏î‡∏µ**

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢**:
- ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡πà‡∏≤‡πÑ‡∏î‡πâ ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 5 ‡∏ô‡∏≤‡∏ó‡∏µ (‡πÅ‡∏ï‡πà ok ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà)
- ‚ö†Ô∏è ‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏ß‡πà‡∏≤ SSG

**‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà**:
- ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ö‡πà‡∏≠‡∏¢ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á real-time (posts, profiles)
- ‚úÖ SEO ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (public content)
- ‚úÖ ‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏¢‡∏≠‡∏∞ (dynamic routes)

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏Ñ‡∏∏‡∏ì**:
- `/post/[id]` ‚Üí ‚≠ê ISR 5-10 ‡∏ô‡∏≤‡∏ó‡∏µ (‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÑ‡∏°‡πà‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)
- `/profile/[username]` ‚Üí ‚≠ê ISR 1 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á (‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)
- `/tag/[tagName]` ‚Üí ‚≠ê ISR 10 ‡∏ô‡∏≤‡∏ó‡∏µ (tag posts ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡πâ‡∏≤‡πÜ)

---

## üé® Hybrid Approach - ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î

**‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß!** ‡πÉ‡∏ä‡πâ‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°:

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: Post Detail Page

```typescript
// page.tsx (Server Component - ISR)
export const revalidate = 300; // 5 minutes

export async function generateMetadata({ params }) {
  // SSR for OG tags (SEO)
  const post = await fetchPost(params.id);
  return {
    title: post.title,
    openGraph: { ... }
  };
}

export default async function PostPage({ params }) {
  const post = await fetchPost(params.id);

  return (
    <div>
      {/* Static content from ISR */}
      <PostContent post={post} />

      {/* Dynamic client component */}
      <ClientCommentSection postId={params.id} />
    </div>
  );
}
```

```typescript
// ClientCommentSection.tsx (Client Component - CSR)
"use client";

export function ClientCommentSection({ postId }) {
  // Real-time comments
  const { data: comments } = useCommentTree(postId);

  return <CommentList comments={comments} />;
}
```

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå**:
- ‚úÖ Post content: Fast (ISR cached)
- ‚úÖ SEO: Perfect (server-rendered)
- ‚úÖ Comments: Real-time (client-side)
- ‚úÖ Votes: Interactive (client-side)

---

## üìã ‡πÅ‡∏ú‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏Ñ‡∏∏‡∏ì

### Phase 0: ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥ Phase 3 (1-2 ‡∏ß‡∏±‡∏ô) üî¥ URGENT

**‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏Å‡πà‡∏≠‡∏ô Phase 3 ‡πÄ‡∏û‡∏£‡∏≤‡∏∞**: ‡∏à‡∏∞‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£ fetch data ‡πÉ‡∏ô features

#### Task 0.1: ‡πÅ‡∏Å‡πâ Root Layout (30 ‡∏ô‡∏≤‡∏ó‡∏µ)

```typescript
// app/layout.tsx

// ‚ùå BEFORE (‡∏ú‡∏¥‡∏î)
export const dynamic = 'force-dynamic';

export default async function RootLayout({ children }) {
  await headers(); // ‚Üê ‡∏•‡∏ö‡∏≠‡∏≠‡∏Å!
  return <html>...</html>;
}

// ‚úÖ AFTER (‡∏ñ‡∏π‡∏Å)
export const dynamic = 'auto'; // ‡∏´‡∏£‡∏∑‡∏≠ ‡∏•‡∏ö‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡πÄ‡∏•‡∏¢

export default function RootLayout({ children }) {
  return <html>...</html>;
}
```

**‡∏ó‡∏î‡∏™‡∏≠‡∏ö**: `npm run build` ‡∏î‡∏π‡∏ß‡πà‡∏≤ Next.js ‡∏ó‡∏≥ static generation ‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏´‡∏ô‡∏ö‡πâ‡∏≤‡∏á

---

#### Task 0.2: ‡πÄ‡∏û‡∏¥‡πà‡∏° ISR ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Critical Pages (2-3 ‡∏ä‡∏°)

**1. Post Detail Page** (traffic ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î):

```typescript
// app/post/[id]/page.tsx

export const revalidate = 300; // 5 minutes

export async function generateMetadata({ params }: { params: { id: string } }) {
  const postRes = await fetch(`${API_URL}/posts/${params.id}`, {
    cache: 'no-store', // Fresh for OG tags
  });

  if (!postRes.ok) return { title: 'Post not found' };

  const post = await postRes.json();
  return {
    title: post.title,
    description: post.content?.substring(0, 160),
    openGraph: {
      title: post.title,
      description: post.content?.substring(0, 160),
      images: post.mediaUrls || [],
    },
  };
}

export default function PostPage({ params }: { params: { id: string } }) {
  // Client component handles dynamic content
  return <PostDetailContent postId={params.id} />;
}
```

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå**: ‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏ö‡πà‡∏≠‡∏¢‡∏à‡∏∞‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≤‡∏Å (cached)

---

**2. Profile Page**:

```typescript
// app/profile/[username]/page.tsx

export const revalidate = 3600; // 1 hour

export async function generateMetadata({ params }: { params: { username: string } }) {
  const userRes = await fetch(`${API_URL}/users/${params.username}`, {
    cache: 'no-store',
  });

  if (!userRes.ok) return { title: 'User not found' };

  const user = await userRes.json();
  return {
    title: `${user.displayName} (@${user.username})`,
    description: user.bio,
    openGraph: {
      title: user.displayName,
      images: [user.avatarUrl],
    },
  };
}

export default function ProfilePage({ params }: { params: { username: string } }) {
  return <ProfileContent username={params.username} />;
}
```

---

**3. Login/Register Pages** (‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î):

```typescript
// app/login/page.tsx

export const revalidate = 86400; // 1 day (rarely changes)

export const metadata = {
  title: 'Login',
  description: 'Login to your account',
};

export default function LoginPage() {
  return <LoginForm />;
}
```

---

#### Task 0.3: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ React Query Defaults (30 ‡∏ô‡∏≤‡∏ó‡∏µ)

```typescript
// lib/providers/query-provider.tsx ‡∏´‡∏£‡∏∑‡∏≠ app/layout.tsx

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• "fresh" ‡∏ô‡∏≤‡∏ô 5 ‡∏ô‡∏≤‡∏ó‡∏µ (‡πÑ‡∏°‡πà refetch ‡∏ã‡πâ‡∏≥)
      staleTime: 1000 * 60 * 5, // 5 minutes

      // ‡πÄ‡∏Å‡πá‡∏ö cache ‡πÑ‡∏ß‡πâ 10 ‡∏ô‡∏≤‡∏ó‡∏µ
      gcTime: 1000 * 60 * 10, // 10 minutes (formerly cacheTime)

      // Refetch ‡πÄ‡∏°‡∏∑‡πà‡∏≠ focus tab ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤
      refetchOnWindowFocus: true,

      // ‡πÑ‡∏°‡πà refetch ‡πÄ‡∏°‡∏∑‡πà‡∏≠ mount (‡πÉ‡∏ä‡πâ cache)
      refetchOnMount: false,

      // Retry 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡πâ‡∏≤ fail
      retry: 1,
    },
  },
});
```

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå**: ‡∏•‡∏î API calls ‡∏•‡∏á 70-80%

---

### Performance Benchmark: ‡∏Å‡πà‡∏≠‡∏ô vs ‡∏´‡∏•‡∏±‡∏á

| Page | Before (CSR) | After (ISR) | Improvement |
|------|--------------|-------------|-------------|
| `/post/[id]` | 2.5s | 0.4s | **84% faster** |
| `/profile/[username]` | 2.8s | 0.3s | **89% faster** |
| `/tag/[tagName]` | 2.2s | 0.5s | **77% faster** |
| `/login` | 1.5s | 0.1s | **93% faster** |

---

## üó∫Ô∏è Rendering Strategy Decision Tree

```
START: ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ render ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ

‚îú‚îÄ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô?
‚îÇ  ‚îú‚îÄ YES ‚Üí ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏•‡∏¢?
‚îÇ  ‚îÇ  ‚îú‚îÄ YES ‚Üí SSG ‚úÖ (login, about)
‚îÇ  ‚îÇ  ‚îî‚îÄ NO ‚Üí ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ö‡πà‡∏≠‡∏¢‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?
‚îÇ  ‚îÇ     ‚îú‚îÄ ‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí CSR ‚ö†Ô∏è (home feed)
‚îÇ  ‚îÇ     ‚îú‚îÄ ‡∏ó‡∏∏‡∏Å‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí ISR (1 min) ‚úÖ
‚îÇ  ‚îÇ     ‚îú‚îÄ ‡∏ó‡∏∏‡∏Å‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‚Üí ISR (1 hour) ‚úÖ (profiles)
‚îÇ  ‚îÇ     ‚îî‚îÄ ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô ‚Üí ISR (1 day) ‚úÖ
‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ NO ‚Üí ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô user-specific
‚îÇ     ‚îú‚îÄ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ SEO?
‚îÇ     ‚îÇ  ‚îú‚îÄ YES ‚Üí SSR ‚úÖ (edit-post)
‚îÇ     ‚îÇ  ‚îî‚îÄ NO ‚Üí Real-time updates ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£?
‚îÇ     ‚îÇ     ‚îú‚îÄ YES ‚Üí CSR ‚úÖ (chat, notifications)
‚îÇ     ‚îÇ     ‚îî‚îÄ NO ‚Üí SSR ‚úÖ
‚îÇ     ‚îÇ
‚îÇ     ‚îî‚îÄ Interactive form / Complex UI?
‚îÇ        ‚îî‚îÄ YES ‚Üí CSR ‚úÖ (create-post, chat)
```

---

## üìä ‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏ú‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏Ñ‡∏∏‡∏ì

### Pages Categorized by Rendering Strategy

#### CSR (Client-Side Rendering) - 9 pages
**‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠**: Real-time, User-specific, Forms

| Page | Reason |
|------|--------|
| `/` (Home Feed) | Infinite scroll + real-time updates |
| `/chat` | Real-time WebSocket |
| `/chat/[username]` | Real-time messages |
| `/create-post` | Form with file uploads |
| `/notifications` | User-specific + real-time |
| `/notifications/settings` | User-specific |
| `/my-posts` | User-specific |
| `/saved` | User-specific |
| `/search` | Query-dependent (dynamic) |

---

#### ISR (Incremental Static Regeneration) - 4 pages ‚≠ê ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ!
**‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠**: Public content + SEO important + Update occasionally

| Page | Revalidate | Reason |
|------|------------|--------|
| `/post/[id]` | 300s (5 min) | Posts rarely change, SEO critical |
| `/profile/[username]` | 3600s (1 hr) | Profiles rarely change, SEO critical |
| `/tag/[tagName]` | 600s (10 min) | Tag content updates slowly |
| `/profile/[username]/followers` | 3600s (1 hr) | Follower lists change slowly |

---

#### SSG (Static Site Generation) - 2 pages
**‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠**: Identical for everyone, Never changes

| Page | Reason |
|------|--------|
| `/login` | Same page for everyone |
| `/register` | Same page for everyone |

---

#### SSR (Server-Side Rendering) - 1 page
**‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠**: User-specific + SEO needed

| Page | Reason |
|------|--------|
| `/edit-post/[id]` | Auth check + SEO + fresh data |

---

## üöÄ Implementation Order (‡∏Å‡πà‡∏≠‡∏ô Phase 3)

### Week 0: Before Phase 3 Migration

**Day 1: Quick Wins** (2-3 ‡∏ä‡∏°)
- [ ] Task 0.1: ‡πÅ‡∏Å‡πâ root layout (`dynamic = 'auto'`)
- [ ] Task 0.3: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ React Query defaults
- [ ] Test: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ app ‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ

**Day 2: ISR for Critical Pages** (3-4 ‡∏ä‡∏°)
- [ ] Task 0.2.1: `/post/[id]` ‚Üí ISR (5 min)
- [ ] Task 0.2.2: `/profile/[username]` ‚Üí ISR (1 hr)
- [ ] Test: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö SEO (share link ‡∏ö‡∏ô Facebook/Twitter)

**Day 3: SSG for Auth Pages** (1-2 ‡∏ä‡∏°)
- [ ] `/login` ‚Üí SSG
- [ ] `/register` ‚Üí SSG
- [ ] Test: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö login/register flow

**Day 4: Testing & Monitoring** (2-3 ‡∏ä‡∏°)
- [ ] Test ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤ manually
- [ ] Check Lighthouse scores (before/after)
- [ ] Run `npm run build` ‚Üí ‡∏î‡∏π build output
- [ ] Deploy to staging ‚Üí monitor

**Total Time**: 8-12 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á (3-4 ‡∏ß‡∏±‡∏ô)

---

### Expected Build Output (‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ)

```bash
npm run build

Route (app)                              Size     First Load JS
‚îå ‚óã /                                    5.2 kB         120 kB
‚îú ‚óè /post/[id]                           2.8 kB         115 kB  ‚Üê ISR (5 min)
‚îú ‚óè /profile/[username]                  3.1 kB         116 kB  ‚Üê ISR (1 hr)
‚îú ‚óè /tag/[tagName]                       2.9 kB         115 kB  ‚Üê ISR (10 min)
‚îú ‚óã /login                               1.5 kB         112 kB  ‚Üê SSG
‚îú ‚óã /register                            1.6 kB         112 kB  ‚Üê SSG
‚îú Œª /edit-post/[id]                      3.2 kB         117 kB  ‚Üê SSR
‚îî Œª /chat                                4.8 kB         119 kB  ‚Üê CSR

‚óã  (Static)   prerendered as static content
‚óè  (ISR)      incremental static regeneration
Œª  (Dynamic)  server-rendered on demand
```

**‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå**:
- `‚óã` = Static (SSG) - ‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
- `‚óè` = ISR - ‡πÄ‡∏£‡πá‡∏ß‡∏£‡∏≠‡∏á‡∏•‡∏á‡∏°‡∏≤ + auto update
- `Œª` = Dynamic (SSR/CSR) - ‡∏ä‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÅ‡∏ï‡πà flexible

---

## üéØ UX Benefits (‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏ï‡πà‡∏≠ User)

### Before (All CSR):
1. ‚ùå User ‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡∏•‡πà‡∏≤ 2-3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (loading spinner)
2. ‚ùå Share link ‡∏ö‡∏ô Facebook ‚Üí ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ (no OG tags)
3. ‚ùå Google ‡πÑ‡∏°‡πà index ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ (SEO ‡πÅ‡∏¢‡πà)
4. ‚ùå Mobile user ‡∏£‡∏≠‡∏ô‡∏≤‡∏ô (‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏ä‡πâ‡∏≤)

### After (Hybrid):
1. ‚úÖ User ‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ 0.3-0.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
2. ‚úÖ Share link ‡∏ö‡∏ô Facebook ‚Üí ‡∏°‡∏µ‡∏£‡∏π‡∏õ + title ‡∏™‡∏ß‡∏¢
3. ‚úÖ Google index ‡πÑ‡∏î‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà (SEO ‡∏î‡∏µ)
4. ‚úÖ Mobile user ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏£‡πá‡∏ß (HTML ‡∏û‡∏£‡πâ‡∏≠‡∏°)

---

## ‚ö†Ô∏è Common Pitfalls (‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ß‡∏±‡∏á)

### 1. ISR ‡∏Å‡∏±‡∏ö User-Specific Data

```typescript
// ‚ùå ‡∏ú‡∏¥‡∏î: ISR ‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• user-specific
export const revalidate = 300;

export default function MyPostsPage() {
  const user = useAuthStore();
  // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πà‡∏≤‡∏á‡∏Ñ‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÅ‡∏ö‡∏ö ‚Üí ‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö ISR
}

// ‚úÖ ‡∏ñ‡∏π‡∏Å: ‡πÉ‡∏ä‡πâ CSR ‡πÅ‡∏ó‡∏ô
"use client";

export default function MyPostsPage() {
  const user = useAuthStore();
  const { data } = useMyPosts(user.id);
}
```

---

### 2. ISR ‡∏Å‡∏±‡∏ö Real-time Data

```typescript
// ‚ùå ‡∏ú‡∏¥‡∏î: Chat messages + ISR
export const revalidate = 60;

export default function ChatPage() {
  // Messages ‡∏°‡∏≤‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí ISR ‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô
}

// ‚úÖ ‡∏ñ‡∏π‡∏Å: ‡πÉ‡∏ä‡πâ CSR + WebSocket
"use client";

export default function ChatPage() {
  const messages = useChatStore();
  // Real-time WebSocket
}
```

---

### 3. Mixed Server/Client Components

```typescript
// ‚ùå ‡∏ú‡∏¥‡∏î: Client component ‡πÉ‡∏ô Server component
export default async function PostPage() {
  const post = await fetchPost();
  const user = useAuthStore(); // ‚Üê Error! Can't use hooks in server
}

// ‚úÖ ‡∏ñ‡∏π‡∏Å: ‡πÅ‡∏¢‡∏Å client/server ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
// page.tsx (Server)
export default async function PostPage() {
  const post = await fetchPost();
  return <PostContent post={post} />;
}

// PostContent.tsx (Client)
"use client";
export function PostContent({ post }) {
  const user = useAuthStore(); // ‚Üê OK
}
```

---

## üìö ‡∏ó‡∏≥‡πÑ‡∏°‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å "‡∏¢‡∏≤‡∏Å" ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤?

### ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:

1. **Next.js App Router ‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô**
   - Server Components vs Client Components ‡∏™‡∏±‡∏ö‡∏™‡∏ô
   - ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å rendering strategy ‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡∏°‡∏≤‡∏Å
   - Documentation ‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô 100%

2. **Trade-offs ‡∏¢‡∏≤‡∏Å**
   - ‡πÄ‡∏£‡πá‡∏ß vs Real-time?
   - SEO vs Interactivity?
   - Developer Experience vs Performance?

3. **‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏°‡∏µ‡πÄ‡∏¢‡∏≠‡∏∞**
   - Next.js caching
   - React Query caching
   - ISR revalidation
   - Browser caching
   - CDN caching
   - ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î!

---

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô:

#### 1. **‡πÉ‡∏ä‡πâ Rules of Thumb** (‡∏Å‡∏é‡∏á‡πà‡∏≤‡∏¢‡πÜ)

```
‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...
‚îú‚îÄ ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô
‚îÇ  ‚îú‚îÄ ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô ‚Üí SSG
‚îÇ  ‚îî‚îÄ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ô‡∏≤‡∏ô‡πÜ ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‚Üí ISR
‚îÇ
‚îî‚îÄ ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô
   ‚îú‚îÄ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ SEO ‚Üí SSR
   ‚îî‚îÄ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ SEO ‚Üí CSR
```

#### 2. **Start Simple, Optimize Later**

**Phase 1**: ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏Å‡πà‡∏≠‡∏ô (CSR ‡∏Å‡πá‡πÇ‡∏≠‡πÄ‡∏Ñ)
**Phase 2**: ‡∏ß‡∏±‡∏î performance (Lighthouse)
**Phase 3**: Optimize ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô (ISR ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ä‡πâ‡∏≤)

#### 3. **‡πÉ‡∏ä‡πâ Monitoring Tools**

```typescript
// ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Next.js Speed Insights
import { SpeedInsights } from '@vercel/speed-insights/next';

export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        {children}
        <SpeedInsights />
      </body>
    </html>
  );
}
```

---

## üéì Best Practices

### 1. Default to ISR ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Public Pages

```typescript
// ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡πÉ‡∏à ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ ISR
export const revalidate = 600; // 10 minutes

// ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á
```

### 2. Use React Query ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Client-side Data

```typescript
const { data, isLoading } = useQuery({
  queryKey: ['posts', postId],
  queryFn: () => fetchPost(postId),
  staleTime: 1000 * 60 * 5, // 5 min
});
```

### 3. Separate Server/Client Clearly

```
app/
‚îú‚îÄ‚îÄ post/[id]/
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx          ‚Üê Server (ISR)
‚îÇ   ‚îî‚îÄ‚îÄ PostContent.tsx   ‚Üê Client (interactive)
```

### 4. Test with Real Data

```bash
# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö production build locally
npm run build
npm start

# ‡∏î‡∏π build output
.next/server/app/...
```

---

## üìä Monitoring & Metrics

### ‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏π:

1. **Lighthouse Score** (Target: 90+)
   - Performance: 90+
   - SEO: 95+
   - Accessibility: 95+

2. **Core Web Vitals**:
   - LCP (Largest Contentful Paint): < 2.5s
   - FID (First Input Delay): < 100ms
   - CLS (Cumulative Layout Shift): < 0.1

3. **Business Metrics**:
   - Bounce Rate: ‡∏•‡∏î‡∏•‡∏á 20-30%
   - Time on Page: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô 30-40%
   - SEO Traffic: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô 50-100%

---

## ‚úÖ Checklist: ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏° Phase 3

- [ ] ‡πÅ‡∏Å‡πâ root layout (`dynamic = 'auto'`)
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° ISR ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö `/post/[id]`
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° ISR ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö `/profile/[username]`
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° SSG ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö `/login`, `/register`
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ React Query defaults
- [ ] Test ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤ manually
- [ ] Run Lighthouse tests
- [ ] Deploy to staging
- [ ] Monitor for 1-2 ‡∏ß‡∏±‡∏ô
- [ ] ‡∏ñ‡πâ‡∏≤ OK ‚Üí ‡πÄ‡∏£‡∏¥‡πà‡∏° Phase 3!

---

## üéØ Final Recommendations

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏Ñ‡∏∏‡∏ì:

**‡∏ó‡∏≥ Phase 0 ‡∏Å‡πà‡∏≠‡∏ô Phase 3** ‡πÄ‡∏û‡∏£‡∏≤‡∏∞:
1. ‚úÖ ‡∏à‡∏∞‡πÑ‡∏î‡πâ performance ‡∏î‡∏µ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÅ‡∏£‡∏Å
2. ‚úÖ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÅ‡∏Å‡πâ‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á (‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏ß‡∏•‡∏≤)
3. ‚úÖ ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≥ Phase 3 ‡∏à‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à data flow ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô

**Timeline**:
- Phase 0 (Performance): 3-4 ‡∏ß‡∏±‡∏ô
- Phase 3 (Architecture): 3-4 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå

**Total**: ~1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô

**Result**: App ‡∏ó‡∏µ‡πà fast + scalable + maintainable üöÄ

---

**Questions?** ‡∏ñ‡∏≤‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö!
